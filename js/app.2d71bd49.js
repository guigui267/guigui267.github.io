(function(e){function t(t){for(var o,r,i=t[0],l=t[1],c=t[2],d=0,u=[];d<i.length;d++)r=i[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&u.push(s[r][0]),s[r]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(e[o]=l[o]);h&&h(t);while(u.length)u.shift()();return a.push.apply(a,c||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,r=1;r<n.length;r++){var i=n[r];0!==s[i]&&(o=!1)}o&&(a.splice(t--,1),e=l(l.s=n[0]))}return e}var o={},r={app:0},s={app:0},a=[];function i(e){return l.p+"js/"+({about:"about"}[e]||e)+"."+{about:"47150727"}[e]+".js"}function l(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.e=function(e){var t=[],n={about:1};r[e]?t.push(r[e]):0!==r[e]&&n[e]&&t.push(r[e]=new Promise((function(t,n){for(var o="css/"+({about:"about"}[e]||e)+"."+{about:"d2a42473"}[e]+".css",s=l.p+o,a=document.getElementsByTagName("link"),i=0;i<a.length;i++){var c=a[i],d=c.getAttribute("data-href")||c.getAttribute("href");if("stylesheet"===c.rel&&(d===o||d===s))return t()}var u=document.getElementsByTagName("style");for(i=0;i<u.length;i++){c=u[i],d=c.getAttribute("data-href");if(d===o||d===s)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var o=t&&t.target&&t.target.src||s,a=new Error("Loading CSS chunk "+e+" failed.\n("+o+")");a.code="CSS_CHUNK_LOAD_FAILED",a.request=o,delete r[e],h.parentNode.removeChild(h),n(a)},h.href=s;var p=document.getElementsByTagName("head")[0];p.appendChild(h)})).then((function(){r[e]=0})));var o=s[e];if(0!==o)if(o)t.push(o[2]);else{var a=new Promise((function(t,n){o=s[e]=[t,n]}));t.push(o[2]=a);var c,d=document.createElement("script");d.charset="utf-8",d.timeout=120,l.nc&&d.setAttribute("nonce",l.nc),d.src=i(e);var u=new Error;c=function(t){d.onerror=d.onload=null,clearTimeout(h);var n=s[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",u.name="ChunkLoadError",u.type=o,u.request=r,n[1](u)}s[e]=void 0}};var h=setTimeout((function(){c({type:"timeout",target:d})}),12e4);d.onerror=d.onload=c,document.head.appendChild(d)}return Promise.all(t)},l.m=e,l.c=o,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)l.d(n,o,function(t){return e[t]}.bind(null,o));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/",l.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],d=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var h=d;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"287b":function(e,t,n){"use strict";n("9dc6")},2969:function(e,t,n){"use strict";n("f699")},3506:function(e,t,n){},"3d13":function(e,t,n){},"400e":function(e,t,n){e.exports=n.p+"img/VRhouse.dde2109f.png"},"56d7":function(e,t,n){"use strict";n.r(t);var o=n("7a23");const r={class:"common-layout"};function s(e,t,n,s,a,i){const l=Object(o["resolveComponent"])("el-header"),c=Object(o["resolveComponent"])("router-view"),d=Object(o["resolveComponent"])("el-main"),u=Object(o["resolveComponent"])("el-container"),h=Object(o["resolveComponent"])("Hovers");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",r,[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(l,{class:"titles"},{default:Object(o["withCtx"])(()=>[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.demoTitle),1)]),_:1}),Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(u,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(d,null,{default:Object(o["withCtx"])(()=>[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(({Component:e})=>[(Object(o["openBlock"])(),Object(o["createBlock"])(o["KeepAlive"],null,[(Object(o["openBlock"])(),Object(o["createBlock"])(Object(o["resolveDynamicComponent"])(e)))],1024))]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})]),_:1}),Object(o["createVNode"])(h,{onEvent:s.demoChange,class:"buts"},null,8,["onEvent"])])}var a=n("9b64"),i=n.n(a),l=n("400e"),c=n.n(l),d=n("f337"),u=n.n(d),h=n("6268"),p=n.n(h),m=n("934e"),b=n.n(m);const f=e=>(Object(o["pushScopeId"])("data-v-5c0a2934"),e=e(),Object(o["popScopeId"])(),e),v=Object(o["createTextVNode"])(" 打开 "),g={class:"bak"},j=f(()=>Object(o["createElementVNode"])("img",{src:i.a,alt:"ARdemo"},null,-1)),O=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),y=f(()=>Object(o["createElementVNode"])("h4",null,"AR小房子",-1)),w=[j,O,y],V=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),R=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),x=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),E=f(()=>Object(o["createElementVNode"])("img",{src:c.a,alt:"VRdemo"},null,-1)),S=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),C=f(()=>Object(o["createElementVNode"])("h4",null,"VR案例",-1)),A=[E,S,C],k=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),N=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),P=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),M=f(()=>Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("button",null,[Object(o["createElementVNode"])("a",{href:"http://1.117.26.233:8826/"},[Object(o["createElementVNode"])("img",{src:u.a,alt:"WPGC"}),Object(o["createElementVNode"])("h4",null,"智能工厂")])])],-1)),L=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),_=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),B=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),T=f(()=>Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("button",null,[Object(o["createElementVNode"])("a",{href:"http://1.117.26.233:9188/"},[Object(o["createElementVNode"])("img",{src:p.a,alt:"HZJSC"}),Object(o["createElementVNode"])("h4",null,"城市地图")])])],-1)),H=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),D=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),U=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),G=f(()=>Object(o["createElementVNode"])("img",{src:b.a,alt:"猫咪"},null,-1)),W=f(()=>Object(o["createElementVNode"])("h1",null,"关于作者",-1)),z=[G,W],I=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),F=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),q=f(()=>Object(o["createElementVNode"])("br",null,null,-1)),X=f(()=>Object(o["createElementVNode"])("span",null,[Object(o["createElementVNode"])("button",null,[Object(o["createElementVNode"])("h1",null,"更多demo敬请期待")])],-1));function J(e,t,n,r,s,a){const i=Object(o["resolveComponent"])("el-button"),l=Object(o["resolveComponent"])("router-link"),c=Object(o["resolveComponent"])("el-scrollbar"),d=Object(o["resolveComponent"])("el-drawer");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i,{type:"primary",style:{"margin-left":"16px"},onClick:t[0]||(t[0]=e=>r.drawer=!0)},{default:Object(o["withCtx"])(()=>[v]),_:1}),Object(o["createVNode"])(d,{modelValue:r.drawer,"onUpdate:modelValue":t[4]||(t[4]=e=>r.drawer=e),title:"导航","with-header":!0,direction:r.direction,size:"20%"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("div",g,[Object(o["createVNode"])(c,null,{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(l,{to:"/"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("button",{onClick:t[1]||(t[1]=e=>r.sent("AR房子"))},w)]),_:1})]),V,R,x,Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(l,{to:"/VR"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("button",{onClick:t[2]||(t[2]=e=>r.sent("VR小房子"))},A)]),_:1})]),k,N,P,M,L,_,B,T,H,D,U,Object(o["createElementVNode"])("span",null,[Object(o["createVNode"])(l,{to:"/about"},{default:Object(o["withCtx"])(()=>[Object(o["createElementVNode"])("button",{onClick:t[3]||(t[3]=e=>r.sent("关于作者"))},z)]),_:1})]),I,F,q,X]),_:1})])]),_:1},8,["modelValue","direction"])])}var K={setup(e,{emit:t}){const n=e=>{t("event",e)};return{drawer:Object(o["ref"])(!1),direction:Object(o["ref"])("rtl"),sent:n}}},Z=(n("93b4"),n("6b0d")),Y=n.n(Z);const Q=Y()(K,[["render",J],["__scopeId","data-v-5c0a2934"]]);var $=Q,ee={name:"我的Vue页面",components:{Hovers:$},setup(){const e=Object(o["reactive"])({demoTitle:"AR房子",direction:"ltr"}),t=t=>{e.demoTitle=t};return{...Object(o["toRefs"])(e),demoChange:t}}};n("287b");const te=Y()(ee,[["render",s]]);var ne=te,oe=n("6c02"),re=n("cf05"),se=n.n(re);const ae={class:"home"},ie=Object(o["createElementVNode"])("img",{alt:"Vue logo",src:se.a},null,-1);function le(e,t,n,r,s,a){const i=Object(o["resolveComponent"])("HelloWorld");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ae,[ie,Object(o["createVNode"])(i,{msg:"Welcome to Your Vue.js App"})])}const ce={class:"hello"},de=Object(o["createStaticVNode"])('<p data-v-b9167eee> For a guide and recipes on how to configure / customize this project,<br data-v-b9167eee> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-cli documentation</a>. </p><h3 data-v-b9167eee>Installed CLI Plugins</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-b9167eee>babel</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-b9167eee>eslint</a></li></ul><h3 data-v-b9167eee>Essential Links</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Core Docs</a></li><li data-v-b9167eee><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Forum</a></li><li data-v-b9167eee><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Community Chat</a></li><li data-v-b9167eee><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-b9167eee>Twitter</a></li><li data-v-b9167eee><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>News</a></li></ul><h3 data-v-b9167eee>Ecosystem</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-router</a></li><li data-v-b9167eee><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vuex</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-b9167eee>vue-devtools</a></li><li data-v-b9167eee><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-loader</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-b9167eee>awesome-vue</a></li></ul>',7);function ue(e,t,n,r,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ce,[Object(o["createElementVNode"])("h1",null,Object(o["toDisplayString"])(n.msg),1),de])}var he={name:"HelloWorld",props:{msg:String}};n("8497");const pe=Y()(he,[["render",ue],["__scopeId","data-v-b9167eee"]]);var me=pe,be={name:"Home",components:{HelloWorld:me}};const fe=Y()(be,[["render",le]]);var ve=fe;function ge(e,t,n,r,s,a){const i=Object(o["resolveComponent"])("TScene");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i)])}const je={id:"WebGL",style:{width:"100%",height:"100%"}};function Oe(e,t,n,r,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",je)}var ye=n("90b1"),we=n("ade3"),Ve=n("5a89"),Re=n("ef20"),xe=n("34ad"),Ee=n("8710"),Se=n("598d"),Ce=n("4a8d"),Ae=n("4721");class ke{static createButton(e,t={}){const n=document.createElement("button");function o(){if(void 0===t.domOverlay){var o=document.createElement("div");o.style.display="none",document.body.appendChild(o);var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("width",38),r.setAttribute("height",38),r.style.position="absolute",r.style.right="20px",r.style.top="20px",r.addEventListener("click",(function(){a.end()})),o.appendChild(r);var s=document.createElementNS("http://www.w3.org/2000/svg","path");s.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),s.setAttribute("stroke","#fff"),s.setAttribute("stroke-width",2),r.appendChild(s),void 0===t.optionalFeatures&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:o}}let a=null;async function i(o){o.addEventListener("end",l),e.xr.setReferenceSpaceType("local"),await e.xr.setSession(o),Ue.EnterAR=!0,n.textContent="停止AR展示",t.domOverlay.root.style.display="",a=o}function l(){a.removeEventListener("end",l),n.textContent="点击进入AR",t.domOverlay.root.style.display="none",Ue.EnterAR=!1,a=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="点击进入AR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===a?navigator.xr.requestSession("immersive-ar",t).then(i):a.end()}}function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function s(){r(),n.textContent="该设备环境不支持AR"}function a(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",a(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?o():s()})).catch(s),n;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR需要HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="该设备暂不支持WebXR"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",a(e),e}}}var Ne=n("cc82");class Pe{static createButton(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');const n=document.createElement("button");function o(){let t=null;async function o(o){o.addEventListener("end",r),Ue.EnterVR=!0,await e.xr.setSession(o),n.textContent="退出VR",t=o}function r(){Ue.EnterVR=!1,t.removeEventListener("end",r),n.textContent="进入VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="进入VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===t){const e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",e).then(o)}else t.end()}}function r(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function s(){r(),n.textContent="当前设备或者环境不支持VR"}function a(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",a(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?o():s()})),n;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",a(e),e}}}var Me=n("0ca5"),Le=n("9a3e"),_e=n("4b1d"),Be=n("32d9"),Te=n("360d"),He=n("93e9"),De=n("9ab2"),Ue={EnterAR:!1,hitTestSource:null,hitTestSourceRequested:!1,EnterVR:!1};class Ge{constructor(e){Object(we["a"])(this,"EnterAR",!1),Object(we["a"])(this,"MoveCursor",!1),Object(we["a"])(this,"materials",{}),Object(we["a"])(this,"darkMaterial",new Ve["bb"]({color:"black"})),Object(we["a"])(this,"intersected",[]),this.getContainer(e),this.initScene(),this.initRender(),this.initCamera(),this.initARCamera(),this.initControls(),this.initAmbLight(),this.EventListen(),this.Update()}getContainer(e){let t=document.getElementById(e);return this.container=t}initScene(){let e=new Ve["Cb"];return this.scene=e}initRender(){let e=new Ve["Zb"]({antialias:!0,alpha:!0});return e.setSize(this.container.offsetWidth,this.container.offsetHeight),e.setPixelRatio(window.devicePixelRatio),this.container.appendChild(e.domElement),this.renders=e}RendersShadow(){const e=Ve["h"];return e}initCamera(){let e=new Ve["ob"](45,this.container.offsetWidth/this.container.offsetHeight,.1,1e3);return e.position.set(10,10,10),e.lookAt(0,0,0),this.scene.add(e),this.camera=e}initARCamera(){let e=new Ve["ob"](45,this.container.offsetWidth/this.container.offsetHeight,.01,20);return this.scene.add(e),this.ARcamera=e}initControls(){let e=new Ae["a"](this.camera,this.renders.domElement);return e.enableDamping=!0,this.control=e}initState(){const e=new Re["a"];return this.container.appendChild(e.dom),this.state=e}Update(){requestAnimationFrame(this.Update.bind(this)),0==Ue.EnterAR&&0==Ue.EnterVR&&(this.state&&this.state.update(),this.control.update(),1!=this.bloommodes?(this.renders.clear(),this.renders.render(this.scene,this.camera)):1==this.bloommodes&&this.UnrealBloomUpdate())}EventListen(){window.addEventListener("resize",this.windowResize.bind(this))}windowResize(){this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renders.setSize(this.container.offsetWidth,this.container.offsetHeight)}initAmbLight(){let e=new Ve["c"]("#fff",.2);return this.scene.add(e),this.ambientLight=e}axesHelper(e=100){let t=new Ve["f"](e);return this.scene.add(t),this.axeshelper=t}loadTexture(e){let t=(new Ve["Pb"]).load(e);return t}loadSkyBox(e){let t=(new Ve["r"]).setPath(e).load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);return t}SetMaterial(e,t){if(e){let n=new Ve["fb"](e);return 1==t&&(n.side=Ve["v"]),n}}addSpotlight(e="#fff",t=1,n){let o=new Ve["Kb"](e,t);return 1==n&&(o.castShadow=!0),o}spotHelper(e){let t=new Ve["Lb"](e);return t}addPointLight(e=16777215,t=1,n=100){let o=new Ve["pb"](e,t,n);return o}PointlightHelper(e,t=1){let n=new Ve["qb"](e,t);return n}AddHemisphereLight(e="0xfff",t="0xfff",n=.5){let o=new Ve["E"](e,t,n);return o}DracoLoaders(e){let t=new Me["a"];return t.setDecoderPath(e),t}initRaycaster(){const e=new Ve["yb"];return this.raycaster=e}async TextModel(e,t,n){const o=new Ce["a"];return null==n&&(n="./regular.json"),new Promise(r=>{o.load(n,(function(n){let o=new Se["a"](e,{font:n,size:30,height:1,curveSegments:5,bevelEnabled:!0,bevelThickness:5,bevelSize:2,bevelSegments:2}),s=new Ve["fb"](t),a=new Ve["ab"](o,s);a.castShadow=!0,r(a)}))})}GetMixer(e){this.mixer=!0;let t=new Ve["e"](e);return t}SetGroup(){let e=new Ve["D"];return e}Clocks(){let e=new Ve["p"];return e}LoadModel(e,t){return new Promise(n=>{let o=null;e.indexOf("gltf")>-1||e.indexOf("glb")>-1?(o=new xe["a"],t&&o.setDRACOLoader(t),o.load(e,e=>{e.scene.receiveShadow=!0,n(e)})):e.indexOf("fbx")>-1&&(o=new Ee["a"],o.load(e,e=>{e.receiveShadow=!0,n(e)}))})}createBox(e,t={color:"#fff"}){const n=new Ve["k"](e,e,e),o=new Ve["fb"](t);o.side=Ve["v"];const r=new Ve["ab"](n,o);return r}Vec3Obj(e,t,n){return new Ve["Vb"](e,t,n)}Obj3D(){let e=new Ve["lb"];return e}onSelects(){if(1==this.MoveCursor&&this.reticle.visible){const e=new Ve["t"](.1,.1,.2,32).translate(0,.1,0),t=new Ve["db"]({color:16777215*Math.random()}),n=new Ve["ab"](e,t);n.position.setFromMatrixPosition(this.reticle.matrix),n.scale.y=2*Math.random()+1,this.scene.add(n)}}addAREvent(e="select",t=this.onSelects.bind(this)){this.ARcontroller.addEventListener(e,()=>{t()})}ARreticle(){this.reticle=new Ve["ab"](new Ve["Bb"](.15,.2,32).rotateX(-Math.PI/2),new Ve["bb"]),this.reticle.matrixAutoUpdate=!1,this.reticle.visible=!1,this.scene.add(this.reticle)}ARmode(e){"移动光标"==e&&(this.MoveCursor=!0,this.ARreticle()),this.renders.xr.enabled=!0,this.container.appendChild(ke.createButton(this.renders,{requiredFeatures:["hit-test"]})),this.ARcontroller=this.renders.xr.getController(0),this.scene.add(this.ARcontroller),this.ARUpdate()}ARUpdate(){this.renders.setAnimationLoop(this.ARDataUpdate.bind(this))}ARDataUpdate(e,t){if(t){const e=this.renders.xr.getReferenceSpace(),n=this.renders.xr.getSession();if(0==Ue.hitTestSourceRequested&&(console.log(n,"数据s"),n.requestReferenceSpace("viewer").then((function(e){console.log(e,"创建数据"),n.requestHitTestSource({space:e}).then((function(e){console.log(e),Ue.hitTestSource=e}))})),n.addEventListener("end",(function(){Ue.hitTestSourceRequested=!1,Ue.hitTestSource=null})),Ue.hitTestSourceRequested=!0),Ue.hitTestSource){const n=t.getHitTestResults(Ue.hitTestSource);if(1==this.MoveCursor)if(n.length){const t=n[0];this.reticle.visible=!0,this.reticle.matrix.fromArray(t.getPose(e).transform.matrix)}else this.reticle.visible=!1}}1==Ue.EnterAR&&this.renders.render(this.scene,this.ARcamera)}ARforApple(){this.renders.toneMapping=Ve["a"],this.renders.outputEncoding=Ve["ac"];const e=new Ve["nb"](this.renders);this.scene.environment=e.fromScene(new _e["a"],.04).texture,this.appleARExporter=new Le["a"]}AppleARButton(e){const t=document.createElement("a");t.rel="ar",t.id="link",t.href="",t.download="asset.usdz",document.body.appendChild(t);const n=document.createElement("img");n.id="button",n.width="100",n.src="./arkit.png",t.appendChild(n),t.style.position="absolute",t.style.bottom="15px",t.style.left="calc(50%-40px)",t.href=URL.createObjectURL(e)}async ARMeshForApple(e){const t=await this.appleARExporter.parse(e),n=new Blob([t],{type:"application/octet-stream"});this.AppleARButton(n)}CreateUV2(e){e.addAttribute("uv2",new Ve["m"](e.attributes.uv.array,2))}EffectsPass(){const e=new Be["a"](this.renders);return this.effectcomposers=e}EffectsPassResize(){this.effectcomposers.setSize(this.container.offsetWidth,this.container.offsetHeight)}EffectsPass2(){const e=new Be["a"](this.renders);return this.effectcomposers2=e}Effects2PassResize(){this.effectcomposers2.setSize(this.container.offsetWidth,this.container.offsetHeight)}RenderScenePass(){const e=new He["a"](this.scene,this.camera);return this.renderSceneComposer=e}SceneShaderPASS(){const e=new Ve["Db"]({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.effectcomposers.renderTarget2.texture}},vertexShader:"varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",fragmentShader:"uniform sampler2D baseTexture;uniform sampler2D bloomTexture;varying vec2 vUv;void main() { gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) ); }"}),t=new Te["a"](e,"baseTexture");return t.needsSwap=!0,this.Sceneshaderpass=t}BloomLayer(){const e=new Ve["L"];return e.set(this.Bloom_Scene),this.bloom_Layer=e}UnrealBloomMode(){this.bloommodes=!0,this.Init_Scene=0,this.Bloom_Scene=1,this.renders.toneMapping=Ve["zb"],this.EffectsPass(),this.EffectsPass2(),this.RenderScenePass(),this.BloomLayer(),this.bloomPass=new De["a"](new Ve["Ub"](this.container.offsetWidth,this.container.offsetHeight),1.5,.4,.85),this.bloomPass.threshold=0,this.bloomPass.strength=1.5,this.bloomPass.radius=0,this.effectcomposers.renderToScreen=!1,this.effectcomposers.addPass(this.renderSceneComposer),this.effectcomposers.addPass(this.bloomPass),this.SceneShaderPASS(),this.effectcomposers2.addPass(this.renderSceneComposer),this.effectcomposers2.addPass(this.Sceneshaderpass),this.UnrealBloomUpdate()}UnrealBloomUpdate(){this.scene&&this.scene.traverse(e=>{e.isMesh&&!1===this.bloom_Layer.test(e.layers)&&(this.materials[e.uuid]=e.material,e.material=this.darkMaterial)}),this.effectcomposers.render(),this.scene&&this.scene.traverse(e=>{this.materials[e.uuid]&&(e.material=this.materials[e.uuid],delete this.materials[e.uuid])}),this.effectcomposers2.render()}BloomObjectAdd(e){e.layers.toggle(1)}EnterVR(){this.renders.outputEncoding=Ve["ac"],this.renders.xr.enabled=!0,this.initVRMovePlane(),this.container.appendChild(Pe.createButton(this.renders)),this.initVRCamera(),this.initVRControl(),this.VRUpdate()}initVRMovePlane(){this.VRmovePlane=this.Obj3D(),this.VRmovePlane.name="VR移动台",this.VRmovePlane.position.z=2,this.scene.add(this.VRmovePlane)}initVRControl(){this.VRcontroller1=this.renders.xr.getController(0),this.VRcontroller1.addEventListener("selectstart",this.VROnSelectStart.bind(this)),this.VRcontroller1.addEventListener("selected",this.VROnSelectEnd.bind(this)),this.VRcontroller2=this.renders.xr.getController(1),this.VRcontroller2.addEventListener("selectstart",this.VROnSelectStart.bind(this)),this.VRcontroller2.addEventListener("selected",this.VROnSelectEnd.bind(this)),this.VRmovePlane.add(this.VRcontroller1),this.VRmovePlane.add(this.VRcontroller2),this.initVRChooseGroup(),this.initTempMatrix(),this.VRControlModel(),this.initRaycaster()}VRControlModel(){const e=new Ne["a"];this.controllerGrip1=this.renders.xr.getControllerGrip(0),this.controllerGrip1.add(e.createControllerModel(this.controllerGrip1)),this.VRmovePlane.add(this.controllerGrip1),this.controllerGrip2=this.renders.xr.getControllerGrip(1),this.controllerGrip2.add(e.createControllerModel(this.controllerGrip2)),this.VRmovePlane.add(this.controllerGrip2),this.VRControlLine()}VRControlLine(){const e=(new Ve["n"]).setFromPoints([new Ve["Vb"](0,0,0),new Ve["Vb"](0,0,-1)]),t=new Ve["M"](e);t.name="VRline",t.scale.z=5,this.controllerGrip1.add(t.clone()),this.controllerGrip2.add(t.clone())}initTempMatrix(){this.tempMatrix=new Ve["Z"]}initVRChooseGroup(){this.VRchooseGroup=this.SetGroup(),this.VRchooseGroup.name="可以被VR手柄选中的对象",this.scene.add(this.VRchooseGroup)}initVRCamera(){this.VRCamera=new Ve["ob"](50,this.container.offsetWidth/this.container.offsetHeight,.01,100),this.VRCamera.position.set(0,1.6,3),this.VRmovePlane.add(this.VRCamera)}VROnSelectStart(e){const t=e.target,n=this.getIntersections(t);if(n.length>0){const e=n[0],o=e.object;o.material.emissive.b=1,t.attach(o),t.userData.selected=o}}VROnSelectEnd(e){const t=e.target;if(void 0!==t.userData.selected){const e=t.userData.selected;e.material.emissive.b=0,this.VRchooseGroup.attach(e),t.userData.selected=void 0}}getIntersections(e){return this.tempMatrix.identity().extractRotation(e.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(e.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix),this.raycaster.intersectObjects(this.VRchooseGroup.children)}ObjectBeChoose(e){if(void 0!==e.userData.selected)return;const t=e.getObjectByName("VRline"),n=this.getIntersections(e);if(n.length>0){const e=n[0],o=e.object;o.material.emissive.r=1,this.intersected.push(o),t&&(t.scale.z=e.distance)}else t&&(t.scale.z=5)}ClearObjectBeChoose(){while(this.intersected.length){const e=this.intersected.pop();e.material.emissive.r=0}}VRUpdate(){this.renders.setAnimationLoop(this.VRdataUpdate.bind(this))}VRdataUpdate(){1==Ue.EnterVR&&(this.ClearObjectBeChoose(),this.ObjectBeChoose(this.VRcontroller1),this.ObjectBeChoose(this.VRcontroller2),this.renders.clear(),this.renders.render(this.scene,this.VRCamera))}powerDesiger(){this.designer={Name:"米大饭",EnglishName:"Wade",blog:"https://blog.csdn.net/weixin_43980651?spm=1010.2135.3001.5343"}}}var We=Ge,ze={setup(){let e;Object(o["onMounted"])(()=>{e=ye["a"].service({fullscreen:!0});let t=new We("WebGL");t.camera.position.set(.35,.02,.07),t.camera.lookAt(0,-.1,-.2),t.control.target=t.Vec3Obj(0,-.1,-.2);let n=t.AddHemisphereLight();t.scene.add(n);let o=t.addSpotlight();o.position.y=1;let r=t.Obj3D();t.scene.add(r),r.position.set(0,0,-.2),o.target=r,t.scene.add(o);let s,a=t.createBox(.01,{color:"red"});async function i(){let e=t.SetGroup();e.name="无人机组";let n=t.DracoLoaders("./draco/gltf/"),o=await t.LoadModel("./resources/LittlestTokyo.glb",n),r=await t.LoadModel("./resources/LittlestTokyoForApple.glb");r.scene.scale.set(.1,.1,.1),o.scene.traverse(e=>{e.isMesh&&(e.material=t.SetMaterial({map:e.material.map,emissiveMap:e.material.emissiveMap,metalness:0,roughness:.2}))}),o.scene.rotation.y=Math.PI,o.scene.scale.set(.01,.01,.01),o.scene.position.set(0,.1,0),s=t.GetMixer(o.scene),r.scene.scale.set(.01,.01,.01),e.add(o.scene),e.scale.set(.02,.02,.02),e.position.set(0,-.1,-.2),t.scene.add(e),s.clipAction(o.animations[0]).play();var a=navigator.userAgent;a.indexOf("iPhone")>-1||a.indexOf("Mac")>-1?(t.ARforApple(),t.ARMeshForApple(r.scene)):t.ARmode()}a.position.set(0,0,-.2);let l=t.Clocks();function c(){requestAnimationFrame(c);const e=l.getDelta();s&&s.update(e)}c(),console.log("AR模型文件来源threejs管网案例:https://threejs.org/examples/#webgl_animation_keyframes"),i().then(()=>{e.close()})})}};n("2969");const Ie=Y()(ze,[["render",Oe],["__scopeId","data-v-2c6d9248"]]);var Fe=Ie,qe={name:"AR小房子",components:{TScene:Fe}};n("76d3");const Xe=Y()(qe,[["render",ge],["__scopeId","data-v-442b9fcc"]]);var Je=Xe;function Ke(e,t,n,r,s,a){const i=Object(o["resolveComponent"])("VRscene");return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,[Object(o["createVNode"])(i)])}const Ze={id:"WebGL1",style:{width:"100%",height:"100%"}};function Ye(e,t,n,r,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",Ze)}var Qe=n("5c40"),$e={setup(){let e,t;Object(Qe["nb"])(()=>{t=ye["a"].service({fullscreen:!0}),e=new We("WebGL1"),e.renders.shadowMap.enabled=!0;const n=e.scene,o=e.addPointLight(16777215,.5,100);o.position.set(0,4.5,2.5),n.add(o);const r=e.addPointLight(16777215,.5,100);r.castShadow=!0,r.shadow.mapSize.width=2048,r.shadow.mapSize.height=2048,r.position.set(0,4.5,-2),n.add(r);const s=e.addPointLight(16777215,.5,100);s.position.set(5,4.5,-2),n.add(s);let a=[];async function i(){const t=await e.LoadModel("./resources/house.glb");t.scene.traverse(t=>{t.isMesh&&("mesh_node011"==t.parent.name?a.push(t):t.material=e.SetMaterial({color:t.material.color,map:t.material.map}),"mesh_node134"==t.name||"mesh_node133"==t.name||"mesh_node132"==t.name?t.castShadow=!1:t.castShadow=!0,t.receiveShadow=!0)}),n.add(t.scene)}i().then(()=>{a[1].material=e.SetMaterial({color:"skyblue",transparent:!0,opacity:.6}),t.close()}),e.EnterVR(),console.log("VR模型文件提供博主首页:https://webgl.blog.csdn.net/")})}};const et=Y()($e,[["render",Ye]]);var tt=et,nt={name:"VR小demo",components:{VRscene:tt}};n("bd60");const ot=Y()(nt,[["render",Ke],["__scopeId","data-v-155e667f"]]);var rt=ot;const st=e=>(Object(o["pushScopeId"])("data-v-8d3e75e0"),e=e(),Object(o["popScopeId"])(),e),at=st(()=>Object(o["createElementVNode"])("iframe",{src:"http://1.117.26.233:9188/",frameborder:"0"},null,-1)),it=[at];function lt(e,t,n,r,s,a){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",null,it)}var ct={};n("c90f");const dt=Y()(ct,[["render",lt],["__scopeId","data-v-8d3e75e0"]]);var ut=dt;const ht=[{path:"/HOME",name:"Home",component:ve},{path:"/about",name:"About",component:()=>n.e("about").then(n.bind(null,"f820"))},{path:"/",name:"ARHouse",component:Je},{path:"/VR",name:"VRdemo",component:rt},{path:"/SmartCity",name:"SmartCity",component:ut}],pt=Object(oe["a"])({history:Object(oe["b"])(),routes:ht});var mt=pt,bt=n("5502"),ft=Object(bt["a"])({state:{},mutations:{},actions:{},modules:{}}),vt=n("c3a1");n("7437");Object(o["createApp"])(ne).use(vt["a"]).use(ft).use(mt).mount("#app")},6268:function(e,t,n){e.exports=n.p+"img/JSC.384a6a65.png"},7327:function(e,t,n){},"76d3":function(e,t,n){"use strict";n("7327")},"77dd":function(e,t,n){},8497:function(e,t,n){"use strict";n("c45a")},"934e":function(e,t,n){e.exports=n.p+"img/cats.fdb0f670.jpg"},"93b4":function(e,t,n){"use strict";n("3d13")},"9b64":function(e,t,n){e.exports=n.p+"img/ARhouse.18644a1d.png"},"9dc6":function(e,t,n){},bd60:function(e,t,n){"use strict";n("3506")},c45a:function(e,t,n){},c90f:function(e,t,n){"use strict";n("77dd")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},f337:function(e,t,n){e.exports=n.p+"img/WP.e8d504c3.png"},f699:function(e,t,n){}});
//# sourceMappingURL=app.2d71bd49.js.map