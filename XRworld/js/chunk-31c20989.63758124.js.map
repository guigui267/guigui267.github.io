{"version":3,"sources":["webpack:///./src/views/OldCamera.vue","webpack:///./src/components/Camera.vue","webpack:///./src/components/Camera.vue?75d5","webpack:///./src/views/OldCamera.vue?a9f2","webpack:///./src/views/OldCamera.vue?07e9"],"names":["id","style","setup","cameraScene","loadingInstance","skycubes","mixerUpdateID","videoTextures","videos","service","fullscreen","lights","createVideos","ModelLoading","then","close","SceneDestory","cancelAnimationFrame","console","log","spotlight","addSpotlight","position","set","scene","add","loadSkyBox","background","document","createElement","display","autoplay","playsInline","navigator","mediaDevices","getUserMedia","constraints","video","width","height","facingMode","stream","srcObject","play","catch","error","setVideoAsTexture","LoadModel","camera","traverse","child","isMesh","material","transparent","name","SetMaterial","map","envMap","__exports__","components","oldcamera","render"],"mappings":"yQACE,gCAIM,YAFJ,yBAAa,K,OCDVA,GAAG,QAAQC,MAAA,8B,wDAAhB,gCAAwD,MAAxD,G,0EAUa,GACbC,MADa,WAEX,IAAIC,EACAC,EACAC,EAEAC,EACAC,EACAC,EAEJ,iBAAU,WACRJ,EAAkB,OAAUK,QAAQ,CAAEC,YAAY,IAClDP,EAAc,IAAI,OAAS,SAG3BQ,IACAC,IACAC,IAAeC,MAAK,WAClBV,EAAgBW,cAIpB,iBAAgB,WACdZ,EAAYa,eAEZR,EAAS,KACTS,qBAAqBX,GACrBY,QAAQC,IAAI,YAGd,IAAMR,EAAS,WACb,IAAMS,EAAYjB,EAAYkB,aAAa,SAAU,GACrDD,EAAUE,SAASC,KAAK,GAAI,GAAI,GAEhCpB,EAAYqB,MAAMC,IAAIL,GACtBf,EAAWF,EAAYuB,WAAW,eAClCvB,EAAYqB,MAAMG,WAAatB,GAG3BO,EAAe,WAMnB,GALAJ,EAASoB,SAASC,cAAc,SAChCrB,EAAOP,MAAM6B,QAAU,OACvBtB,EAAOuB,SACPvB,EAAOwB,YAEHC,UAAUC,cAAgBD,UAAUC,aAAaC,aAAc,CACjE,IAAMC,EAAc,CAClBC,MAAO,CAAEC,MAAO,KAAMC,OAAQ,IAAKC,WAAY,SAGjDP,UAAUC,aACPC,aAAaC,GACbtB,MAAK,SAAU2B,GAGdjC,EAAOkC,UAAYD,EACnBjC,EAAOmC,UAERC,OAAM,SAAUC,GACf3B,QAAQ2B,MAAM,sCAAuCA,WAGzD3B,QAAQ2B,MAAM,yCAGhBtC,EAAgBJ,EAAY2C,kBAAkBtC,IAG1CK,EAAW,yDAAI,oHACEV,EAAY4C,UAAU,0BADxB,OACbC,EADa,OAEnBA,EAAOxB,MAAMyB,UAAS,SAACC,GACjBA,EAAMC,SACRD,EAAME,SAASC,aAAc,EACX,UAAdH,EAAMI,OACRJ,EAAME,SAAWjD,EAAYoD,YAAY,CACvCC,IAAKjD,KAIT2C,EAAME,SAASK,OAASpD,MAG5BF,EAAYqB,MAAMC,IAAIuB,EAAOxB,OAdV,2CAAJ,uD,qBC3ErB,MAAMkC,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAAS,KAErD,QFIA,GACbJ,KAAM,cACNK,WAAY,CACVC,UAAA,I,UGPJ,MAAM,EAA2B,IAAgB,EAAQ,CAAC,CAAC,SAASC,GAAQ,CAAC,YAAY,qBAE1E,gB,oCCTf","file":"js/chunk-31c20989.63758124.js","sourcesContent":["<template>\r\n  <div>\r\n    <!-- <keep-alive> -->\r\n    <oldcamera />\r\n    <!-- </keep-alive> -->\r\n  </div>\r\n</template>\r\n\r\n\r\n<script>\r\nimport oldcamera from \"@/components/Camera.vue\";\r\nexport default {\r\n  name: \"shaderDemo1\",\r\n  components: {\r\n    oldcamera,\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\ndiv {\r\n  height: 100%;\r\n  width: 100%;\r\n}\r\n</style>","<template>\r\n  <!-- <el-progress class=\"pros\" type=\"circle\" :percentage=\"20\">  </el-progress> -->\r\n  <div id=\"WebGL\" style=\"width: 100%; height: 100%\"></div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport { onBeforeUnmount, onMounted } from \"@vue/runtime-core\";\r\nimport VueScene from \"../script/View3D\";\r\nimport { ElLoading } from \"element-plus\";\r\n// import TWEEN from \"tween\";\r\nexport default {\r\n  setup() {\r\n    let cameraScene;\r\n    let loadingInstance;\r\n    let skycubes;\r\n\r\n    let mixerUpdateID;\r\n    let videoTextures;\r\n    let videos;\r\n\r\n    onMounted(() => {\r\n      loadingInstance = ElLoading.service({ fullscreen: true });\r\n      cameraScene = new VueScene(\"WebGL\");\r\n      //   cameraScene.axesHelper();\r\n      //   cameraScene.ambientLight.intensity = 0.5;\r\n      lights();\r\n      createVideos();\r\n      ModelLoading().then(() => {\r\n        loadingInstance.close();\r\n      });\r\n    });\r\n\r\n    onBeforeUnmount(() => {\r\n      cameraScene.SceneDestory();\r\n    //   videos.remove();\r\n      videos = null;\r\n      cancelAnimationFrame(mixerUpdateID);\r\n      console.log(\"场景销毁了\");\r\n    });\r\n\r\n    const lights = () => {\r\n      const spotlight = cameraScene.addSpotlight(0xffffff, 2);\r\n      spotlight.position.set(-10, 10, 0);\r\n\r\n      cameraScene.scene.add(spotlight);\r\n      skycubes = cameraScene.loadSkyBox(\"./skycube1/\");\r\n      cameraScene.scene.background = skycubes;\r\n    };\r\n\r\n    const createVideos = () => {\r\n      videos = document.createElement(\"video\");\r\n      videos.style.display = \"none\";\r\n      videos.autoplay;\r\n      videos.playsInline;\r\n\r\n      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\r\n        const constraints = {\r\n          video: { width: 1280, height: 720, facingMode: \"user\" },\r\n        };\r\n\r\n        navigator.mediaDevices\r\n          .getUserMedia(constraints)\r\n          .then(function (stream) {\r\n            // apply the stream to the video element used in the texture\r\n\r\n            videos.srcObject = stream;\r\n            videos.play();\r\n          })\r\n          .catch(function (error) {\r\n            console.error(\"Unable to access the camera/webcam.\", error);\r\n          });\r\n      } else {\r\n        console.error(\"MediaDevices interface not available.\");\r\n      }\r\n\r\n      videoTextures = cameraScene.setVideoAsTexture(videos);\r\n    };\r\n\r\n    const ModelLoading = async () => {\r\n      const camera = await cameraScene.LoadModel(\"./resources/Camera.glb\");\r\n      camera.scene.traverse((child) => {\r\n        if (child.isMesh) {\r\n          child.material.transparent = true;\r\n          if (child.name == \"videos\") {\r\n            child.material = cameraScene.SetMaterial({\r\n              map: videoTextures,\r\n            });\r\n          }\r\n\r\n          child.material.envMap = skycubes;\r\n        }\r\n      });\r\n      cameraScene.scene.add(camera.scene);\r\n    };\r\n  },\r\n};\r\n</script>","import { render } from \"./Camera.vue?vue&type=template&id=72e5759d\"\nimport script from \"./Camera.vue?vue&type=script&lang=js\"\nexport * from \"./Camera.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"F:\\\\项目外包\\\\yuan-universe\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./OldCamera.vue?vue&type=template&id=e8400b1a&scoped=true\"\nimport script from \"./OldCamera.vue?vue&type=script&lang=js\"\nexport * from \"./OldCamera.vue?vue&type=script&lang=js\"\n\nimport \"./OldCamera.vue?vue&type=style&index=0&id=e8400b1a&scoped=true&lang=css\"\n\nimport exportComponent from \"F:\\\\项目外包\\\\yuan-universe\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-e8400b1a\"]])\n\nexport default __exports__","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--7-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--7-oneOf-1-1!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--7-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../node_modules/@vue/cli-service/node_modules/vue-loader-v16/dist/index.js??ref--1-1!./OldCamera.vue?vue&type=style&index=0&id=e8400b1a&scoped=true&lang=css\""],"sourceRoot":""}