(function(e){function t(t){for(var r,o,s=t[0],c=t[1],l=t[2],u=0,d=[];u<s.length;u++)o=s[u],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);h&&h(t);while(d.length)d.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var s=n[o];0!==a[s]&&(r=!1)}r&&(i.splice(t--,1),e=c(c.s=n[0]))}return e}var r={},o={app:0},a={app:0},i=[];function s(e){return c.p+"js/"+({about:"about"}[e]||e)+"."+{about:"aa799f0f"}[e]+".js"}function c(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(e){var t=[],n={about:1};o[e]?t.push(o[e]):0!==o[e]&&n[e]&&t.push(o[e]=new Promise((function(t,n){for(var r="css/"+({about:"about"}[e]||e)+"."+{about:"d2a42473"}[e]+".css",a=c.p+r,i=document.getElementsByTagName("link"),s=0;s<i.length;s++){var l=i[s],u=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(u===r||u===a))return t()}var d=document.getElementsByTagName("style");for(s=0;s<d.length;s++){l=d[s],u=l.getAttribute("data-href");if(u===r||u===a)return t()}var h=document.createElement("link");h.rel="stylesheet",h.type="text/css",h.onload=t,h.onerror=function(t){var r=t&&t.target&&t.target.src||a,i=new Error("Loading CSS chunk "+e+" failed.\n("+r+")");i.code="CSS_CHUNK_LOAD_FAILED",i.request=r,delete o[e],h.parentNode.removeChild(h),n(i)},h.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(h)})).then((function(){o[e]=0})));var r=a[e];if(0!==r)if(r)t.push(r[2]);else{var i=new Promise((function(t,n){r=a[e]=[t,n]}));t.push(r[2]=i);var l,u=document.createElement("script");u.charset="utf-8",u.timeout=120,c.nc&&u.setAttribute("nonce",c.nc),u.src=s(e);var d=new Error;l=function(t){u.onerror=u.onload=null,clearTimeout(h);var n=a[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",d.name="ChunkLoadError",d.type=r,d.request=o,n[1](d)}a[e]=void 0}};var h=setTimeout((function(){l({type:"timeout",target:u})}),12e4);u.onerror=u.onload=l,document.head.appendChild(u)}return Promise.all(t)},c.m=e,c.c=r,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)c.d(n,r,function(t){return e[t]}.bind(null,r));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var h=u;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},1465:function(e,t,n){},"287b":function(e,t,n){"use strict";n("9dc6")},2969:function(e,t,n){"use strict";n("f699")},3506:function(e,t,n){},"400e":function(e,t,n){e.exports=n.p+"img/VRhouse.dde2109f.png"},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o={class:"common-layout"};function a(e,t,n,a,i,s){var c=Object(r["resolveComponent"])("el-header"),l=Object(r["resolveComponent"])("router-view"),u=Object(r["resolveComponent"])("el-main"),d=Object(r["resolveComponent"])("el-container"),h=Object(r["resolveComponent"])("Hovers");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",o,[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{class:"titles"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.demoTitle),1)]})),_:1}),Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(e){var t=e.Component;return[(Object(r["openBlock"])(),Object(r["createBlock"])(r["KeepAlive"],null,[(Object(r["openBlock"])(),Object(r["createBlock"])(Object(r["resolveDynamicComponent"])(t)))],1024))]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1})]})),_:1}),Object(r["createVNode"])(h,{onEvent:a.demoChange,class:"buts"},null,8,["onEvent"])])}var i=n("5530"),s=n("9b64"),c=n.n(s),l=n("400e"),u=n.n(l),d=n("f337"),h=n.n(d),f=n("6268"),p=n.n(f),v=n("934e"),b=n.n(v),m=function(e){return Object(r["pushScopeId"])("data-v-4eb284d0"),e=e(),Object(r["popScopeId"])(),e},y=Object(r["createTextVNode"])(" 打开 "),g={class:"bak"},j=m((function(){return Object(r["createElementVNode"])("img",{src:c.a,alt:"ARdemo"},null,-1)})),O=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),w=m((function(){return Object(r["createElementVNode"])("h4",null,"AR小房子",-1)})),R=[j,O,w],x=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),V=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),k=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),E=m((function(){return Object(r["createElementVNode"])("img",{src:u.a,alt:"VRdemo"},null,-1)})),S=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),C=m((function(){return Object(r["createElementVNode"])("h4",null,"VR案例",-1)})),A=[E,S,C],N=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),P=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),M=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),L=m((function(){return Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("button",null,[Object(r["createElementVNode"])("a",{href:"http://1.117.26.233:8826/"},[Object(r["createElementVNode"])("img",{src:h.a,alt:"WPGC"}),Object(r["createElementVNode"])("h4",null,"智能工厂")])])],-1)})),_=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),B=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),T=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),H=m((function(){return Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("button",null,[Object(r["createElementVNode"])("a",{href:"http://1.117.26.233:9188/"},[Object(r["createElementVNode"])("img",{src:p.a,alt:"HZJSC"}),Object(r["createElementVNode"])("h4",null,"城市地图")])])],-1)})),D=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),U=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),G=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),W=m((function(){return Object(r["createElementVNode"])("img",{src:b.a,alt:"猫咪"},null,-1)})),z=m((function(){return Object(r["createElementVNode"])("h1",null,"关于作者",-1)})),I=[W,z],F=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),q=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),X=m((function(){return Object(r["createElementVNode"])("br",null,null,-1)})),J=m((function(){return Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("button",null,[Object(r["createElementVNode"])("h1",null,"更多demo敬请期待")])],-1)}));function K(e,t,n,o,a,i){var s=Object(r["resolveComponent"])("el-button"),c=Object(r["resolveComponent"])("router-link"),l=Object(r["resolveComponent"])("el-scrollbar"),u=Object(r["resolveComponent"])("el-drawer");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(s,{type:"primary",style:{"margin-left":"16px"},onClick:t[0]||(t[0]=function(e){return o.drawer=!0})},{default:Object(r["withCtx"])((function(){return[y]})),_:1}),Object(r["createVNode"])(u,{modelValue:o.drawer,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.drawer=e}),title:"导航","with-header":!0,direction:o.direction,size:"20%"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",g,[Object(r["createVNode"])(l,null,{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("span",null,[Object(r["createVNode"])(c,{to:"/"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("button",{onClick:t[1]||(t[1]=function(e){return o.sent("AR房子")})},R)]})),_:1})]),x,V,k,Object(r["createElementVNode"])("span",null,[Object(r["createVNode"])(c,{to:"/VR"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("button",{onClick:t[2]||(t[2]=function(e){return o.sent("VR小房子")})},A)]})),_:1})]),N,P,M,L,_,B,T,H,D,U,G,Object(r["createElementVNode"])("span",null,[Object(r["createVNode"])(c,{to:"/about"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("button",{onClick:t[3]||(t[3]=function(e){return o.sent("关于作者")})},I)]})),_:1})]),F,q,X,J]})),_:1})])]})),_:1},8,["modelValue","direction"])])}var Z={setup:function(e,t){var n=t.emit,o=function(e){n("event",e)};return{drawer:Object(r["ref"])(!1),direction:Object(r["ref"])("rtl"),sent:o}}},Y=(n("c052"),n("6b0d")),Q=n.n(Y);const $=Q()(Z,[["render",K],["__scopeId","data-v-4eb284d0"]]);var ee=$,te={name:"我的Vue页面",components:{Hovers:ee},setup:function(){var e=Object(r["reactive"])({demoTitle:"AR房子",direction:"ltr"}),t=function(t){e.demoTitle=t};return Object(i["a"])(Object(i["a"])({},Object(r["toRefs"])(e)),{},{demoChange:t})}};n("287b");const ne=Q()(te,[["render",a]]);var re=ne,oe=(n("d3b7"),n("3ca3"),n("ddb0"),n("6c02")),ae=n("cf05"),ie=n.n(ae),se={class:"home"},ce=Object(r["createElementVNode"])("img",{alt:"Vue logo",src:ie.a},null,-1);function le(e,t,n,o,a,i){var s=Object(r["resolveComponent"])("HelloWorld");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",se,[ce,Object(r["createVNode"])(s,{msg:"Welcome to Your Vue.js App"})])}var ue={class:"hello"},de=Object(r["createStaticVNode"])('<p data-v-b9167eee> For a guide and recipes on how to configure / customize this project,<br data-v-b9167eee> check out the <a href="https://cli.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-cli documentation</a>. </p><h3 data-v-b9167eee>Installed CLI Plugins</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-babel" target="_blank" rel="noopener" data-v-b9167eee>babel</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-eslint" target="_blank" rel="noopener" data-v-b9167eee>eslint</a></li></ul><h3 data-v-b9167eee>Essential Links</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Core Docs</a></li><li data-v-b9167eee><a href="https://forum.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Forum</a></li><li data-v-b9167eee><a href="https://chat.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>Community Chat</a></li><li data-v-b9167eee><a href="https://twitter.com/vuejs" target="_blank" rel="noopener" data-v-b9167eee>Twitter</a></li><li data-v-b9167eee><a href="https://news.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>News</a></li></ul><h3 data-v-b9167eee>Ecosystem</h3><ul data-v-b9167eee><li data-v-b9167eee><a href="https://router.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-router</a></li><li data-v-b9167eee><a href="https://vuex.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vuex</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/vue-devtools#vue-devtools" target="_blank" rel="noopener" data-v-b9167eee>vue-devtools</a></li><li data-v-b9167eee><a href="https://vue-loader.vuejs.org" target="_blank" rel="noopener" data-v-b9167eee>vue-loader</a></li><li data-v-b9167eee><a href="https://github.com/vuejs/awesome-vue" target="_blank" rel="noopener" data-v-b9167eee>awesome-vue</a></li></ul>',7);function he(e,t,n,o,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",ue,[Object(r["createElementVNode"])("h1",null,Object(r["toDisplayString"])(n.msg),1),de])}var fe={name:"HelloWorld",props:{msg:String}};n("8497");const pe=Q()(fe,[["render",he],["__scopeId","data-v-b9167eee"]]);var ve=pe,be={name:"Home",components:{HelloWorld:ve}};const me=Q()(be,[["render",le]]);var ye=me;function ge(e,t,n,o,a,i){var s=Object(r["resolveComponent"])("TScene");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(s)])}var je={id:"WebGL",style:{width:"100%",height:"100%"}};function Oe(e,t,n,o,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",je)}var we=n("1da1"),Re=(n("96cf"),n("b0c0"),n("d81d"),n("90b1")),xe=n("d4ec"),Ve=n("bee2"),ke=n("ade3"),Ee=(n("2b3d"),n("9861"),n("ac1f"),n("00b4"),n("5a89")),Se=n("ef20"),Ce=n("34ad"),Ae=n("8710"),Ne=n("598d"),Pe=n("4a8d"),Me=n("4721"),Le=(n("5319"),function(){function e(){Object(xe["a"])(this,e)}return Object(Ve["a"])(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=document.createElement("button");function r(){if(void 0===t.domOverlay){var r=document.createElement("div");r.style.display="none",document.body.appendChild(r);var o=document.createElementNS("http://www.w3.org/2000/svg","svg");o.setAttribute("width",38),o.setAttribute("height",38),o.style.position="absolute",o.style.right="20px",o.style.top="20px",o.addEventListener("click",(function(){i.end()})),r.appendChild(o);var a=document.createElementNS("http://www.w3.org/2000/svg","path");a.setAttribute("d","M 12,12 L 28,28 M 28,12 12,28"),a.setAttribute("stroke","#fff"),a.setAttribute("stroke-width",2),o.appendChild(a),void 0===t.optionalFeatures&&(t.optionalFeatures=[]),t.optionalFeatures.push("dom-overlay"),t.domOverlay={root:r}}var i=null;function s(e){return c.apply(this,arguments)}function c(){return c=Object(we["a"])(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o.addEventListener("end",l),e.xr.setReferenceSpaceType("local"),r.next=4,e.xr.setSession(o);case 4:Ie.EnterAR=!0,n.textContent="停止AR展示",t.domOverlay.root.style.display="",i=o;case 8:case"end":return r.stop()}}),r)}))),c.apply(this,arguments)}function l(){i.removeEventListener("end",l),n.textContent="点击进入AR",t.domOverlay.root.style.display="none",Ie.EnterAR=!1,i=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="点击进入AR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){null===i?navigator.xr.requestSession("immersive-ar",t).then(s):i.end()}}function o(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){o(),n.textContent="该设备环境不支持AR"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="ARButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-ar").then((function(e){e?r():a()})).catch(a),n;var s=document.createElement("a");return!1===window.isSecureContext?(s.href=document.location.href.replace(/^http:/,"https:"),s.innerHTML="WEBXR需要HTTPS"):(s.href="https://immersiveweb.dev/",s.innerHTML="该设备暂不支持WebXR"),s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",i(s),s}}]),e}()),_e=n("cc82"),Be=function(){function e(){Object(xe["a"])(this,e)}return Object(Ve["a"])(e,null,[{key:"createButton",value:function(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');var n=document.createElement("button");function r(){var t=null;function r(e){return o.apply(this,arguments)}function o(){return o=Object(we["a"])(regeneratorRuntime.mark((function r(o){return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o.addEventListener("end",a),Ie.EnterVR=!0,r.next=4,e.xr.setSession(o);case 4:n.textContent="退出VR",t=o;case 6:case"end":return r.stop()}}),r)}))),o.apply(this,arguments)}function a(){Ie.EnterVR=!1,t.removeEventListener("end",a),n.textContent="进入VR",t=null}n.style.display="",n.style.cursor="pointer",n.style.left="calc(50% - 50px)",n.style.width="100px",n.textContent="进入VR",n.onmouseenter=function(){n.style.opacity="1.0"},n.onmouseleave=function(){n.style.opacity="0.5"},n.onclick=function(){if(null===t){var e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",e).then(r)}else t.end()}}function o(){n.style.display="",n.style.cursor="auto",n.style.left="calc(50% - 75px)",n.style.width="150px",n.onmouseenter=null,n.onmouseleave=null,n.onclick=null}function a(){o(),n.textContent="当前设备或者环境不支持VR"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return n.id="VRButton",n.style.display="none",i(n),navigator.xr.isSessionSupported("immersive-vr").then((function(e){e?r():a()})),n;var s=document.createElement("a");return!1===window.isSecureContext?(s.href=document.location.href.replace(/^http:/,"https:"),s.innerHTML="WEBXR NEEDS HTTPS"):(s.href="https://immersiveweb.dev/",s.innerHTML="WEBXR NOT AVAILABLE"),s.style.left="calc(50% - 90px)",s.style.width="180px",s.style.textDecoration="none",i(s),s}}]),e}(),Te=n("0ca5"),He=n("9a3e"),De=n("4b1d"),Ue=n("32d9"),Ge=n("360d"),We=n("93e9"),ze=n("9ab2"),Ie={EnterAR:!1,hitTestSource:null,hitTestSourceRequested:!1,EnterVR:!1},Fe=function(){function e(t){Object(xe["a"])(this,e),Object(ke["a"])(this,"EnterAR",!1),Object(ke["a"])(this,"MoveCursor",!1),Object(ke["a"])(this,"materials",{}),Object(ke["a"])(this,"darkMaterial",new Ee["bb"]({color:"black"})),Object(ke["a"])(this,"intersected",[]),this.getContainer(t),this.initScene(),this.initRender(),this.initCamera(),this.initARCamera(),this.initControls(),this.initAmbLight(),this.EventListen(),this.Update()}return Object(Ve["a"])(e,[{key:"getContainer",value:function(e){var t=document.getElementById(e);return this.container=t}},{key:"initScene",value:function(){var e=new Ee["Cb"];return this.scene=e}},{key:"initRender",value:function(){var e=new Ee["Zb"]({antialias:!0,alpha:!0});return e.setSize(this.container.offsetWidth,this.container.offsetHeight),e.setPixelRatio(window.devicePixelRatio),this.container.appendChild(e.domElement),this.renders=e}},{key:"RendersShadow",value:function(){var e=Ee["h"];return e}},{key:"initCamera",value:function(){var e=new Ee["ob"](45,this.container.offsetWidth/this.container.offsetHeight,.1,1e3);return e.position.set(10,10,10),e.lookAt(0,0,0),this.scene.add(e),this.camera=e}},{key:"initARCamera",value:function(){var e=new Ee["ob"](45,this.container.offsetWidth/this.container.offsetHeight,.01,20);return this.scene.add(e),this.ARcamera=e}},{key:"initControls",value:function(){var e=new Me["a"](this.camera,this.renders.domElement);return e.enableDamping=!0,this.control=e}},{key:"initState",value:function(){var e=new Se["a"];return this.container.appendChild(e.dom),this.state=e}},{key:"Update",value:function(){requestAnimationFrame(this.Update.bind(this)),0==Ie.EnterAR&&0==Ie.EnterVR&&(this.state&&this.state.update(),this.control.update(),1!=this.bloommodes?(this.renders.clear(),this.renders.render(this.scene,this.camera)):1==this.bloommodes&&this.UnrealBloomUpdate())}},{key:"EventListen",value:function(){window.addEventListener("resize",this.windowResize.bind(this))}},{key:"windowResize",value:function(){this.camera.aspect=this.container.offsetWidth/this.container.offsetHeight,this.camera.updateProjectionMatrix(),this.renders.setSize(this.container.offsetWidth,this.container.offsetHeight)}},{key:"initAmbLight",value:function(){var e=new Ee["c"]("#fff",.2);return this.scene.add(e),this.ambientLight=e}},{key:"axesHelper",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=new Ee["f"](e);return this.scene.add(t),this.axeshelper=t}},{key:"loadTexture",value:function(e){var t=(new Ee["Pb"]).load(e);return t}},{key:"loadSkyBox",value:function(e){var t=(new Ee["r"]).setPath(e).load(["px.png","nx.png","py.png","ny.png","pz.png","nz.png"]);return t}},{key:"SetMaterial",value:function(e,t){if(e){var n=new Ee["fb"](e);return 1==t&&(n.side=Ee["v"]),n}}},{key:"addSpotlight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#fff",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2?arguments[2]:void 0,r=new Ee["Kb"](e,t);return 1==n&&(r.castShadow=!0),r}},{key:"spotHelper",value:function(e){var t=new Ee["Lb"](e);return t}},{key:"addPointLight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100,r=new Ee["pb"](e,t,n);return r}},{key:"PointlightHelper",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=new Ee["qb"](e,t);return n}},{key:"AddHemisphereLight",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0xfff",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0xfff",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5,r=new Ee["E"](e,t,n);return r}},{key:"DracoLoaders",value:function(e){var t=new Te["a"];return t.setDecoderPath(e),t}},{key:"initRaycaster",value:function(){var e=new Ee["yb"];return this.raycaster=e}},{key:"TextModel",value:function(){var e=Object(we["a"])(regeneratorRuntime.mark((function e(t,n,r){var o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=new Pe["a"],null==r&&(r="./regular.json"),e.abrupt("return",new Promise((function(e){o.load(r,(function(r){var o=new Ne["a"](t,{font:r,size:30,height:1,curveSegments:5,bevelEnabled:!0,bevelThickness:5,bevelSize:2,bevelSegments:2}),a=new Ee["fb"](n),i=new Ee["ab"](o,a);i.castShadow=!0,e(i)}))})));case 3:case"end":return e.stop()}}),e)})));function t(t,n,r){return e.apply(this,arguments)}return t}()},{key:"GetMixer",value:function(e){this.mixer=!0;var t=new Ee["e"](e);return t}},{key:"SetGroup",value:function(){var e=new Ee["D"];return e}},{key:"Clocks",value:function(){var e=new Ee["p"];return e}},{key:"LoadModel",value:function(e,t){return new Promise((function(n){var r=null;e.indexOf("gltf")>-1||e.indexOf("glb")>-1?(r=new Ce["a"],t&&r.setDRACOLoader(t),r.load(e,(function(e){e.scene.receiveShadow=!0,n(e)}))):e.indexOf("fbx")>-1&&(r=new Ae["a"],r.load(e,(function(e){e.receiveShadow=!0,n(e)})))}))}},{key:"createBox",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{color:"#fff"},n=new Ee["k"](e,e,e),r=new Ee["fb"](t);r.side=Ee["v"];var o=new Ee["ab"](n,r);return o}},{key:"Vec3Obj",value:function(e,t,n){return new Ee["Vb"](e,t,n)}},{key:"Obj3D",value:function(){var e=new Ee["lb"];return e}},{key:"onSelects",value:function(){if(1==this.MoveCursor&&this.reticle.visible){var e=new Ee["t"](.1,.1,.2,32).translate(0,.1,0),t=new Ee["db"]({color:16777215*Math.random()}),n=new Ee["ab"](e,t);n.position.setFromMatrixPosition(this.reticle.matrix),n.scale.y=2*Math.random()+1,this.scene.add(n)}}},{key:"addAREvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"select",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.onSelects.bind(this);this.ARcontroller.addEventListener(e,(function(){t()}))}},{key:"ARreticle",value:function(){this.reticle=new Ee["ab"](new Ee["Bb"](.15,.2,32).rotateX(-Math.PI/2),new Ee["bb"]),this.reticle.matrixAutoUpdate=!1,this.reticle.visible=!1,this.scene.add(this.reticle)}},{key:"ARmode",value:function(e){"移动光标"==e&&(this.MoveCursor=!0,this.ARreticle()),this.renders.xr.enabled=!0,this.container.appendChild(Le.createButton(this.renders,{requiredFeatures:["hit-test"]})),this.ARcontroller=this.renders.xr.getController(0),this.scene.add(this.ARcontroller),this.ARUpdate()}},{key:"ARUpdate",value:function(){this.renders.setAnimationLoop(this.ARDataUpdate.bind(this))}},{key:"ARDataUpdate",value:function(e,t){if(t){var n=this.renders.xr.getReferenceSpace(),r=this.renders.xr.getSession();if(0==Ie.hitTestSourceRequested&&(console.log(r,"数据s"),r.requestReferenceSpace("viewer").then((function(e){console.log(e,"创建数据"),r.requestHitTestSource({space:e}).then((function(e){console.log(e),Ie.hitTestSource=e}))})),r.addEventListener("end",(function(){Ie.hitTestSourceRequested=!1,Ie.hitTestSource=null})),Ie.hitTestSourceRequested=!0),Ie.hitTestSource){var o=t.getHitTestResults(Ie.hitTestSource);if(1==this.MoveCursor)if(o.length){var a=o[0];this.reticle.visible=!0,this.reticle.matrix.fromArray(a.getPose(n).transform.matrix)}else this.reticle.visible=!1}}1==Ie.EnterAR&&this.renders.render(this.scene,this.ARcamera)}},{key:"ARforApple",value:function(){this.renders.toneMapping=Ee["a"],this.renders.outputEncoding=Ee["ac"];var e=new Ee["nb"](this.renders);this.scene.environment=e.fromScene(new De["a"],.04).texture,this.appleARExporter=new He["a"]}},{key:"AppleARButton",value:function(e){var t=document.createElement("a");t.rel="ar",t.id="link",t.href="",t.download="asset.usdz",document.body.appendChild(t);var n=document.createElement("img");n.id="button",n.width="100",n.src="./arkit.png",t.appendChild(n),t.style.position="absolute",t.style.bottom="15px",t.style.left="calc(50%-40px)",t.href=URL.createObjectURL(e)}},{key:"ARMeshForApple",value:function(){var e=Object(we["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.appleARExporter.parse(t);case 2:n=e.sent,r=new Blob([n],{type:"application/octet-stream"}),this.AppleARButton(r);case 5:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}()},{key:"CreateUV2",value:function(e){e.addAttribute("uv2",new Ee["m"](e.attributes.uv.array,2))}},{key:"EffectsPass",value:function(){var e=new Ue["a"](this.renders);return this.effectcomposers=e}},{key:"EffectsPassResize",value:function(){this.effectcomposers.setSize(this.container.offsetWidth,this.container.offsetHeight)}},{key:"EffectsPass2",value:function(){var e=new Ue["a"](this.renders);return this.effectcomposers2=e}},{key:"Effects2PassResize",value:function(){this.effectcomposers2.setSize(this.container.offsetWidth,this.container.offsetHeight)}},{key:"RenderScenePass",value:function(){var e=new We["a"](this.scene,this.camera);return this.renderSceneComposer=e}},{key:"SceneShaderPASS",value:function(){var e=new Ee["Db"]({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.effectcomposers.renderTarget2.texture}},vertexShader:"varying vec2 vUv;void main() {vUv = uv;gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );}",fragmentShader:"uniform sampler2D baseTexture;uniform sampler2D bloomTexture;varying vec2 vUv;void main() { gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) ); }"}),t=new Ge["a"](e,"baseTexture");return t.needsSwap=!0,this.Sceneshaderpass=t}},{key:"BloomLayer",value:function(){var e=new Ee["L"];return e.set(this.Bloom_Scene),this.bloom_Layer=e}},{key:"UnrealBloomMode",value:function(){this.bloommodes=!0,this.Init_Scene=0,this.Bloom_Scene=1,this.renders.toneMapping=Ee["zb"],this.EffectsPass(),this.EffectsPass2(),this.RenderScenePass(),this.BloomLayer(),this.bloomPass=new ze["a"](new Ee["Ub"](this.container.offsetWidth,this.container.offsetHeight),1.5,.4,.85),this.bloomPass.threshold=0,this.bloomPass.strength=1.5,this.bloomPass.radius=0,this.effectcomposers.renderToScreen=!1,this.effectcomposers.addPass(this.renderSceneComposer),this.effectcomposers.addPass(this.bloomPass),this.SceneShaderPASS(),this.effectcomposers2.addPass(this.renderSceneComposer),this.effectcomposers2.addPass(this.Sceneshaderpass),this.UnrealBloomUpdate()}},{key:"UnrealBloomUpdate",value:function(){var e=this;this.scene&&this.scene.traverse((function(t){t.isMesh&&!1===e.bloom_Layer.test(t.layers)&&(e.materials[t.uuid]=t.material,t.material=e.darkMaterial)})),this.effectcomposers.render(),this.scene&&this.scene.traverse((function(t){e.materials[t.uuid]&&(t.material=e.materials[t.uuid],delete e.materials[t.uuid])})),this.effectcomposers2.render()}},{key:"BloomObjectAdd",value:function(e){e.layers.toggle(1)}},{key:"EnterVR",value:function(){this.renders.outputEncoding=Ee["ac"],this.renders.xr.enabled=!0,this.initVRMovePlane(),this.container.appendChild(Be.createButton(this.renders)),this.initVRCamera(),this.initVRControl(),this.VRUpdate()}},{key:"initVRMovePlane",value:function(){this.VRmovePlane=this.Obj3D(),this.VRmovePlane.name="VR移动台",this.VRmovePlane.position.z=2,this.scene.add(this.VRmovePlane)}},{key:"initVRControl",value:function(){this.VRcontroller1=this.renders.xr.getController(0),this.VRcontroller1.addEventListener("selectstart",this.VROnSelectStart.bind(this)),this.VRcontroller1.addEventListener("selected",this.VROnSelectEnd.bind(this)),this.VRcontroller2=this.renders.xr.getController(1),this.VRcontroller2.addEventListener("selectstart",this.VROnSelectStart.bind(this)),this.VRcontroller2.addEventListener("selected",this.VROnSelectEnd.bind(this)),this.VRmovePlane.add(this.VRcontroller1),this.VRmovePlane.add(this.VRcontroller2),this.initVRChooseGroup(),this.initTempMatrix(),this.VRControlModel(),this.initRaycaster()}},{key:"VRControlModel",value:function(){var e=new _e["a"];this.controllerGrip1=this.renders.xr.getControllerGrip(0),this.controllerGrip1.add(e.createControllerModel(this.controllerGrip1)),this.VRmovePlane.add(this.controllerGrip1),this.controllerGrip2=this.renders.xr.getControllerGrip(1),this.controllerGrip2.add(e.createControllerModel(this.controllerGrip2)),this.VRmovePlane.add(this.controllerGrip2),this.VRControlLine()}},{key:"VRControlLine",value:function(){var e=(new Ee["n"]).setFromPoints([new Ee["Vb"](0,0,0),new Ee["Vb"](0,0,-1)]),t=new Ee["M"](e);t.name="VRline",t.scale.z=5,this.controllerGrip1.add(t.clone()),this.controllerGrip2.add(t.clone())}},{key:"initTempMatrix",value:function(){this.tempMatrix=new Ee["Z"]}},{key:"initVRChooseGroup",value:function(){this.VRchooseGroup=this.SetGroup(),this.VRchooseGroup.name="可以被VR手柄选中的对象",this.scene.add(this.VRchooseGroup)}},{key:"initVRCamera",value:function(){this.VRCamera=new Ee["ob"](50,this.container.offsetWidth/this.container.offsetHeight,.01,100),this.VRCamera.position.set(0,1.6,3),this.VRmovePlane.add(this.VRCamera)}},{key:"VROnSelectStart",value:function(e){var t=e.target,n=this.getIntersections(t);if(n.length>0){var r=n[0],o=r.object;o.material.emissive.b=1,t.attach(o),t.userData.selected=o}}},{key:"VROnSelectEnd",value:function(e){var t=e.target;if(void 0!==t.userData.selected){var n=t.userData.selected;n.material.emissive.b=0,this.VRchooseGroup.attach(n),t.userData.selected=void 0}}},{key:"getIntersections",value:function(e){return this.tempMatrix.identity().extractRotation(e.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(e.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix),this.raycaster.intersectObjects(this.VRchooseGroup.children)}},{key:"ObjectBeChoose",value:function(e){if(void 0===e.userData.selected){var t=e.getObjectByName("VRline"),n=this.getIntersections(e);if(n.length>0){var r=n[0],o=r.object;o.material.emissive.r=1,this.intersected.push(o),t&&(t.scale.z=r.distance)}else t&&(t.scale.z=5)}}},{key:"ClearObjectBeChoose",value:function(){while(this.intersected.length){var e=this.intersected.pop();e.material.emissive.r=0}}},{key:"VRUpdate",value:function(){this.renders.setAnimationLoop(this.VRdataUpdate.bind(this))}},{key:"VRdataUpdate",value:function(){1==Ie.EnterVR&&(this.ClearObjectBeChoose(),this.ObjectBeChoose(this.VRcontroller1),this.ObjectBeChoose(this.VRcontroller2),this.renders.clear(),this.renders.render(this.scene,this.VRCamera))}},{key:"powerDesiger",value:function(){this.designer={Name:"米大饭",EnglishName:"Wade",blog:"https://blog.csdn.net/weixin_43980651?spm=1010.2135.3001.5343"}}}]),e}(),qe=Fe,Xe={setup:function(){var e;Object(r["onMounted"])((function(){e=Re["a"].service({fullscreen:!0});var t=new qe("WebGL");t.camera.position.set(.35,.02,.07),t.camera.lookAt(0,-.1,-.2),t.control.target=t.Vec3Obj(0,-.1,-.2);var n=t.AddHemisphereLight();t.scene.add(n);var r=t.addSpotlight();r.position.y=1;var o=t.Obj3D();t.scene.add(o),o.position.set(0,0,-.2),r.target=o,t.scene.add(r);var a,i=t.createBox(.01,{color:"red"});function s(){return c.apply(this,arguments)}function c(){return c=Object(we["a"])(regeneratorRuntime.mark((function e(){var n,r,o,i,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.SetGroup(),n.name="无人机组",r=t.DracoLoaders("./draco/gltf/"),e.next=5,t.LoadModel("./resources/LittlestTokyo.glb",r);case 5:return o=e.sent,e.next=8,t.LoadModel("./resources/LittlestTokyoForApple.glb");case 8:i=e.sent,i.scene.scale.set(.1,.1,.1),o.scene.traverse((function(e){e.isMesh&&(e.material=t.SetMaterial({map:e.material.map,emissiveMap:e.material.emissiveMap,metalness:0,roughness:.2}))})),o.scene.rotation.y=Math.PI,o.scene.scale.set(.01,.01,.01),o.scene.position.set(0,.1,0),a=t.GetMixer(o.scene),i.scene.scale.set(.01,.01,.01),n.add(o.scene),n.scale.set(.02,.02,.02),n.position.set(0,-.1,-.2),t.scene.add(n),a.clipAction(o.animations[0]).play(),s=navigator.userAgent,s.indexOf("iPhone")>-1||s.indexOf("Mac")>-1?(t.ARforApple(),t.ARMeshForApple(i.scene)):t.ARmode();case 23:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}i.position.set(0,0,-.2);var l=t.Clocks();function u(){requestAnimationFrame(u);var e=l.getDelta();a&&a.update(e)}u(),console.log("AR模型文件来源threejs管网案例:https://threejs.org/examples/#webgl_animation_keyframes"),s().then((function(){e.close()}))}))}};n("2969");const Je=Q()(Xe,[["render",Oe],["__scopeId","data-v-2c6d9248"]]);var Ke=Je,Ze={name:"AR小房子",components:{TScene:Ke}};n("76d3");const Ye=Q()(Ze,[["render",ge],["__scopeId","data-v-442b9fcc"]]);var Qe=Ye;function $e(e,t,n,o,a,i){var s=Object(r["resolveComponent"])("VRscene");return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,[Object(r["createVNode"])(s)])}var et={id:"WebGL1",style:{width:"100%",height:"100%"}};function tt(e,t,n,o,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",et)}var nt=n("5c40"),rt={setup:function(){var e,t;Object(nt["nb"])((function(){t=Re["a"].service({fullscreen:!0}),e=new qe("WebGL1"),e.renders.shadowMap.enabled=!0;var n=e.scene,r=e.addPointLight(16777215,.5,100);r.position.set(0,4.5,2.5),n.add(r);var o=e.addPointLight(16777215,.5,100);o.castShadow=!0,o.shadow.mapSize.width=2048,o.shadow.mapSize.height=2048,o.position.set(0,4.5,-2),n.add(o);var a=e.addPointLight(16777215,.5,100);a.position.set(5,4.5,-2),n.add(a);var i=[];function s(){return c.apply(this,arguments)}function c(){return c=Object(we["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.LoadModel("./resources/house.glb");case 2:r=t.sent,r.scene.traverse((function(t){t.isMesh&&("mesh_node011"==t.parent.name?i.push(t):t.material=e.SetMaterial({color:t.material.color,map:t.material.map}),"mesh_node134"==t.name||"mesh_node133"==t.name||"mesh_node132"==t.name?t.castShadow=!1:t.castShadow=!0,t.receiveShadow=!0)})),n.add(r.scene);case 5:case"end":return t.stop()}}),t)}))),c.apply(this,arguments)}s().then((function(){i[1].material=e.SetMaterial({color:"skyblue",transparent:!0,opacity:.6}),t.close()})),e.EnterVR(),console.log("VR模型文件提供博主首页:https://webgl.blog.csdn.net/")}))}};const ot=Q()(rt,[["render",tt]]);var at=ot,it={name:"VR小demo",components:{VRscene:at}};n("bd60");const st=Q()(it,[["render",$e],["__scopeId","data-v-155e667f"]]);var ct=st,lt=function(e){return Object(r["pushScopeId"])("data-v-8d3e75e0"),e=e(),Object(r["popScopeId"])(),e},ut=lt((function(){return Object(r["createElementVNode"])("iframe",{src:"http://1.117.26.233:9188/",frameborder:"0"},null,-1)})),dt=[ut];function ht(e,t,n,o,a,i){return Object(r["openBlock"])(),Object(r["createElementBlock"])("div",null,dt)}var ft={};n("c90f");const pt=Q()(ft,[["render",ht],["__scopeId","data-v-8d3e75e0"]]);var vt=pt,bt=[{path:"/HOME",name:"Home",component:ye},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}},{path:"/",name:"ARHouse",component:Qe},{path:"/VR",name:"VRdemo",component:ct},{path:"/SmartCity",name:"SmartCity",component:vt}],mt=Object(oe["a"])({history:Object(oe["b"])(),routes:bt}),yt=mt,gt=n("5502"),jt=Object(gt["a"])({state:{},mutations:{},actions:{},modules:{}}),Ot=n("c3a1");n("7437");Object(r["createApp"])(re).use(Ot["a"]).use(jt).use(yt).mount("#app")},6268:function(e,t,n){e.exports=n.p+"img/JSC.384a6a65.png"},7327:function(e,t,n){},"76d3":function(e,t,n){"use strict";n("7327")},"77dd":function(e,t,n){},8497:function(e,t,n){"use strict";n("c45a")},"934e":function(e,t,n){e.exports=n.p+"img/cats.fdb0f670.jpg"},"9b64":function(e,t,n){e.exports=n.p+"img/ARhouse.18644a1d.png"},"9dc6":function(e,t,n){},bd60:function(e,t,n){"use strict";n("3506")},c052:function(e,t,n){"use strict";n("1465")},c45a:function(e,t,n){},c90f:function(e,t,n){"use strict";n("77dd")},cf05:function(e,t,n){e.exports=n.p+"img/logo.82b9c7a5.png"},f337:function(e,t,n){e.exports=n.p+"img/WP.e8d504c3.png"},f699:function(e,t,n){}});
//# sourceMappingURL=app.d82d5bcd.js.map